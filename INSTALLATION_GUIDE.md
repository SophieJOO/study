# 🚀 빠른 설치 가이드

## ⏱️ 소요 시간: 약 15분

---

## 1️⃣ Apps Script 코드 추가 (5분)

### 단계 1: Google Sheets 열기
1. 기존 스터디 출석 Google Sheets 열기
2. **확장 프로그램 > Apps Script** 클릭

### 단계 2: 다이제스트 함수 추가
1. 기존 `Code.gs` 파일 열기 (또는 `apps script code.gs`)
2. **파일 맨 아래**에 `digest-functions.gs` 파일의 전체 내용 복사 → 붙여넣기
3. **저장** (Ctrl+S 또는 💾 아이콘)

### 단계 3: HTML 파일 추가
1. 좌측 메뉴에서 **+** 버튼 클릭
2. **HTML** 선택
3. 파일명: `digest-page` 입력
4. `digest-page.html` 파일의 전체 내용 복사 → 붙여넣기
5. **저장**

---

## 2️⃣ 웹 앱 배포 (3분)

### 단계 1: 배포
1. Apps Script 편집기 우측 상단 **배포 > 새 배포** 클릭
2. 유형 선택: **⚙️ 웹 앱**
3. 설정:
   - 설명: `스터디 다이제스트 v1`
   - 실행 계정: **나**
   - 액세스 권한: **링크가 있는 모든 사용자**
4. **배포** 클릭
5. **승인 필요** 팝업이 뜨면:
   - **권한 검토** 클릭
   - Google 계정 선택
   - **고급 > (프로젝트명)으로 이동** 클릭
   - **허용** 클릭

### 단계 2: URL 복사
1. **웹 앱 URL** 복사 (예: `https://script.google.com/macros/s/ABC123.../exec`)
2. 메모장에 저장 (나중에 카톡에 공유할 링크)

**💡 Tip**: 다이제스트 페이지는 `웹앱URL?page=digest`

---

## 3️⃣ 트리거 설정 (3분)

### 매일 자동 실행 설정

1. Apps Script 편집기 좌측 메뉴 **⏰ 트리거** (시계 아이콘) 클릭
2. 우측 하단 **+ 트리거 추가** 클릭
3. 설정:
   - 실행할 함수: **`일일다이제스트생성`**
   - 배포 선택: **Head**
   - 이벤트 소스: **시간 기반**
   - 시간 기반 트리거 유형: **일 타이머**
   - 시간대 선택: **오후 8시 ~ 오후 9시** (원하는 시간 선택)
4. **저장** 클릭
5. 권한 요청 시 **허용**

---

## 4️⃣ 테스트 (2분)

### 수동 실행으로 테스트

1. Apps Script 편집기에서 상단 함수 선택 드롭다운 클릭
2. **`오늘의다이제스트메시지확인`** 선택
3. **▶️ 실행** 클릭
4. 실행 로그 확인 (하단 **실행 로그** 탭)
5. "일일 다이제스트 생성 완료" 메시지 확인

### 웹페이지 확인

1. 웹 브라우저에서 **웹앱 URL** + `?page=digest` 방문
   - 예: `https://script.google.com/macros/s/ABC123.../exec?page=digest`
2. 다이제스트 페이지가 정상적으로 표시되는지 확인
3. **"전체 내용 카톡 공유"** 버튼 클릭 → 복사 확인

---

## 5️⃣ 카카오톡 공유 (2분)

### 방법 A: 매일 자동 링크 공유 (추천)

**매일 저녁 8시 이후**:

1. 웹 브라우저에서 다이제스트 페이지 접속
2. **"💬 전체 내용 카톡 공유"** 버튼 클릭
3. 카카오톡 열기
4. 스터디 단톡방에서 **붙여넣기** (Ctrl+V)

**예시 메시지**:
```
📚 오늘의 스터디 다이제스트 (2025-11-22)

✅ 센트룸
   한방병리학 - 담음의 병리
   담음의 형성 원인과 병리 기전에 대해 공부...

✅ 길
   본초학 - 해표약
   해표약의 분류와 각 약재의 특성 비교...

━━━━━━━━━━━━━━━━
📊 출석: 7명 | 오프: 2명 | 결석: 0명

🔗 자세히 보기: https://...
```

### 방법 B: 개인별 공유

각 조원이:
1. 다이제스트 페이지 방문
2. 자기 카드에서 **"📋 카톡에 공유하기"** 버튼 클릭
3. 카카오톡에 붙여넣기

---

## 🔧 고급 설정 (선택 사항)

### 1. 이메일 자동 발송

`digest-functions.gs`의 `일일다이제스트생성()` 함수에서 주석 해제:

```javascript
// 이 줄의 주석을 제거하세요
GmailApp.sendEmail('방장이메일@example.com', '[자동] 오늘의 스터디 다이제스트', message);
```

### 2. 실행 시간 변경

트리거 설정에서 원하는 시간대로 변경 가능:
- 아침 6시 ~ 7시: 전날 내용 확인
- 저녁 8시 ~ 9시: 당일 내용 공유
- 밤 11시 ~ 자정: 하루 마무리

### 3. 다이제스트 디자인 수정

`digest-page.html` 파일의 CSS 부분 수정:
- 색상 변경: `#667eea` → 원하는 색상
- 레이아웃 변경: `grid-template-columns` 값 조정

---

## ❓ 문제 해결

### 문제 1: "데이터를 불러올 수 없습니다"

**원인**: JSON 파일이 생성되지 않음

**해결**:
1. Apps Script에서 `일일다이제스트생성()` 수동 실행
2. 실행 로그에서 오류 확인
3. `CONFIG.JSON_FOLDER_ID` 값이 올바른지 확인

### 문제 2: "권한이 없습니다"

**원인**: 웹 앱 배포 시 권한 설정 오류

**해결**:
1. 배포 > 배포 관리
2. 액세스 권한을 **"링크가 있는 모든 사용자"**로 변경
3. 저장 후 재배포

### 문제 3: 다이제스트 내용이 비어있음

**원인**: 날짜 폴더를 찾지 못함

**해결**:
1. Google Drive에서 날짜 폴더 이름 형식 확인
   - 올바른 형식: `2025-11-22` 또는 `11-22`
2. `날짜추출()` 함수가 폴더명을 인식하는지 확인

### 문제 4: 마크다운 파일이 읽히지 않음

**원인**: 파일 인코딩 오류

**해결**:
1. 마크다운 파일을 UTF-8로 저장
2. 파일명에 특수문자 제거

---

## 📊 운영 가이드

### 매일 루틴

#### 방장/담당자 (1일 1회, 1분 소요):
1. 저녁 8시 이후 다이제스트 페이지 방문
2. "전체 내용 카톡 공유" 버튼 클릭
3. 카톡에 붙여넣기

#### 조원들:
- 변화 없음! 기존처럼 Google Drive에 공부 자료만 업로드
- 원하면 다이제스트 링크 클릭해서 다른 사람 공부 내용 확인

### 주간 점검

1. 트리거가 정상 실행되는지 확인:
   - Apps Script > 트리거 > 실행 기록 확인
2. JSON 폴더에 매일 파일이 생성되는지 확인
3. 링크가 정상 작동하는지 확인

---

## 🎉 완료!

이제 다음과 같은 효과를 기대할 수 있습니다:

✅ **출석체크 자동화 유지**
✅ **카톡에서 지식 공유 활성화**
✅ **조원들의 공부 자극 증가**
✅ **실시간 피드백 가능**
✅ **참여자 부담 제로**

---

## 📞 추가 지원

더 자세한 내용은 `SOLUTION_GUIDE.md` 파일을 참고하세요.

문제가 계속되면:
1. Apps Script 실행 로그 확인
2. 트리거 실행 기록 확인
3. JSON 폴더 권한 확인
